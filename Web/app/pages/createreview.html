<main>
    <div class="container under-header">
        <h1>Write a review</h1>
        <h4 class="mar-top-xl">Recent guests</h4>
        <div class="divider mar-btm-l mar-top-l"></div>
        <div ng-hide="review.guestbookings.length">
            <p>No results found</p>
        </div>
        <div ng-repeat="booking in review.guestbookings">
            <div class="col s12">
                <h5>{{ booking.title }}</h5>
            </div>
            <div ng-hide="booking.bookingdates.length" class="col s12">
                <p>No results found</p>
            </div>
            <div ng-repeat="bookingdate in booking.bookingdates" class="row">
                <div class="col s12">
                    <strong>On {{ bookingdate.date }}: </strong>
                </div>
                <div ng-hide="bookingdate.guests.length" class="col s12">
                    <p>No results found</p>
                </div>
                <div class="col s12 m3" ng-repeat="guest in bookingdate.guests">
                    <div class="card">
                        <div class="card-image">
                            <img ng-src="{{review.userImage(guest)}}" class="review-profile-image">
                        </div>
                        <div class="card-content">
                            <a ui-sref="publicprofile({id:guest.id})">{{ guest.first_name + " " + guest.last_name }}</a>
                        </div>
                        <div class="card-action">
                            <a class="btn waves waves-light center-align" ng-click="review.reviewUser(guest.id, booking.id, guest.first_name, guest.last_name, booking.title)">Write review</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <h4 class="mar-top-xl">Recent hosts</h4>
        <div class="divider mar-btm-l mar-top-l"></div>
        <div ng-hide="review.hostbookingdates.length" class="col s12 mar-btm-xl">
            <p>No results found</p>
        </div>
        <div class="row">
            <div ng-repeat="bookingdate in review.hostbookingdates">
                <div class="col s12 m4">
                    <div class="card">
                        <div class="card-image">
                            <img ng-src="{{review.userImage(bookingdate.booking.host)}}" class="review-profile-image">
                        </div>
                        <div class="card-content">
                            <strong>{{ bookingdate.booking.host.first_name + " " + bookingdate.booking.host.last_name }}</strong>
                            <br><span>Hosted </span> <br><span>on <strong>{{ bookingdate.date }}</strong></span>
                        </div>
                        <div class="card-action">
                            <a class="btn waves waves-light" ng-click="review.reviewUser(guest.id, booking.id, guest.first_name, guest.last_name, booking.title)">Write review</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>