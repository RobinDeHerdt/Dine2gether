<main>
	<div class="container under-header profile">
		<h1>Dashboard</h1>
		<div ng-if="dashboard.hostrequests.length" class="row">
		  <div class="col s12 m12">
			<div class="card">
			  <div class="card-content black-text">
				<span class="card-title">Received requests</span>
				<div ng-repeat="hostrequest in dashboard.hostrequests">
				  <ul class="collection">
					<li class="collection-item">
					  <span class="title">Request by: <a href="/#/user/{{hostrequest.user.id}}/reviews"><strong>{{hostrequest.user.first_name + " " + hostrequest.user.last_name}}</strong></a></span>
					  <p>Booking: <a href="/#/booking/{{ hostrequest.booking.id }}/details"><strong>{{ hostrequest.booking.title}}</strong></a></p>
					  <p>Date and time: {{ dashboard.convertToDate(hostrequest.date_time) | date:"dd/MM/yyyy" }} at {{ dashboard.convertToDate(hostrequest.date_time) | date:"HH:mm" }}</p>
					  <a href="" class="secondary-content btn-flat mar-right-m mar-btm-m" ng-click="dashboard.declineRequest(hostrequest.id)"><i class="material-icons right">delete</i>Decline</a>
					  <a href="" class="secondary-content btn-flat mar-right-m mar-btm-m" ng-click="dashboard.acceptRequest(hostrequest.id, hostrequest.user.id, hostrequest.booking.id)"><i class="material-icons right">done</i>Accept</a>
					</li>
				  </ul>
				</div>
			  </div>
			</div>
		  </div>
		</div>
		<div ng-if="dashboard.guestrequests.length" class="row">
		  <div class="col s12 m12">
			<div class="card">
			  <div class="card-content black-text">
				<span class="card-title">Sent requests</span>
				<div ng-repeat="guestrequest in dashboard.guestrequests">
				  <ul class="collection">
					<li class="collection-item">
						<div class="row no-mar-btm">
						  <div class="col s10">
							  <span ng-if="guestrequest.pivot.status == pending" class="badge grey lighten-1 white-text" data-badge-caption="No response yet"></span>
							  <span ng-if="guestrequest.pivot.status == accepted" class="badge green darken-1 white-text" data-badge-caption="Accepted"></span>
							  <span ng-if="guestrequest.pivot.status == declined" class="badge red darken-1 white-text" data-badge-caption="Declined"></span>
							  <p>Booking: <a href="/#/booking/{{guestrequest.booking.id}}/details"><strong>{{ guestrequest.booking.title}}</strong></a></p>
							  <span>Hosted: <a href="/#/user/{{guestrequest.booking.host.id}}/reviews"><strong>{{guestrequest.booking.host.first_name + " " + guestrequest.booking.host.last_name}}</strong></a></span>
							  <p>Date and time: {{ dashboard.convertToDate(guestrequest.date) | date:"dd/MM/yyyy" }} at {{dashboard.convertToDate(guestrequest.date) | date:"HH:mm" }}</p>
						  </div>
					      <div class="col s2">
							<a href="" class="collection-action-btn" ng-click="dashboard.deleteUserRequest(guestrequest.id)" title="Delete request">
								<i class="fa fa-trash-o fa-2x" aria-hidden="true"></i>
							</a>
						  </div>
					  </div>
					</li>
				  </ul>
				</div>
			  </div>
			</div>
		  </div>
		</div>
		<div class="row">
		  <div class="col s12 m12">
			<div class="card">
			  <div class="card-content black-text">
				<span class="card-title">My active bookings as a host</span>
				<p ng-if="dashboard.hostbookings.length < 1">No bookings yet as a host.</p>
				<div ng-repeat="booking in dashboard.hostbookings">
				  <ul class="collection">
					<li class="collection-item">
						<div class="row no-mar-btm">
							<div class="col s12">
								<a href="/#/booking/{{booking.id}}/details"><h6>{{booking.title}}</h6></a>
								<strong>Dates</strong>
								<ul>
									<li ng-repeat="bookingdate in booking.bookingdates">
										{{ dashboard.convertToDate(bookingdate.date) | date:"dd/MM/yyyy" }} at {{ dashboard.convertToDate(bookingdate.date) | date:"HH:mm" }}
									</li>
								</ul>
								<strong>Address</strong>
								<p>{{ booking.postalcode + " " + booking.city}}</p>
								<p>{{ booking.street_number}}</p>
								<strong>Price</strong>
								<p>{{ "€" + booking.price + "/person"}}</p>
							</div>
							<div class="col s2">
								<a href="" class="collection-action-btn" ng-click="dashboard.deleteBooking(booking.id)" title="Delete booking">
									<i class="fa fa-trash-o fa-2x" aria-hidden="true"></i>
								</a>
							</div>
						</div>
					</li>
				  </ul>
				</div>
			  </div>
			</div>
		  </div>
		</div>
		<div class="row">
		  <div class="col s12 m12">
			<div class="card">
			  <div class="card-content black-text">
				<span class="card-title">My active bookings as a guest</span>
				<p ng-if="dashboard.guestbookingdates.length < 1">No bookings yet as a guest.</p>
				<div ng-repeat="bookingdate in dashboard.guestbookingdates">
				  <ul class="collection">
					<li class="collection-item">
						<div class="row no-mar-btm">
							<div class="col s10">
								<span class="title"><a href="/#/booking/{{bookingdate.booking.id}}/details"><strong>{{bookingdate.booking.title}}</strong></a></span>
								<p>{{ dashboard.convertToDate(bookingdate.date) | date:"dd/MM/yyyy"}} at {{ dashboard.convertToDate(bookingdate.date) | date:"HH:mm"}}</p>
								<p>{{ bookingdate.host.first_name}} {{bookingdate.host.last_name}}</p>
								<p>{{ bookingdate.booking.postalcode + " " + bookingdate.booking.city}}</p>
								<p>{{ bookingdate.booking.street_number}}</p>
								<p>{{ "€" + bookingdate.booking.price + "/person"}}</p>
							</div>
							<div class="col s2">
								<a href="" class="collection-action-btn" ng-click="dashboard.detachFromBooking(bookingdate.booking.id)"><i class="fa fa-trash-o fa-2x" aria-hidden="true"></i></a>
							</div>
						</div>
					</li>
				  </ul>
				</div>
			  </div>
			</div>
		  </div>
		</div>
		<div class="row">
		  <div class="col s12 m12">
			<div class="card">
			  <div class="card-content black-text">
				<span class="card-title">Reviews</span>
			    <a ui-sref="createreview"><h6>Write reviews for your guests or hosts here</h6></a>
			  </div>
			</div>
		  </div>
		</div>
	</div>
</main>