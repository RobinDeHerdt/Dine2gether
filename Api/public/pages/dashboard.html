<main>
	<div class="container under-header profile">
		<h1>Dashboard</h1>
		<div class="row">
<div ng-if="profile.hostrequests.length" class="row">
  <div class="col s12 m12">
	<div class="card">
	  <div class="card-content black-text">
		<span class="card-title">My hostrequests</span>
		<div ng-repeat="hostrequest in profile.hostrequests">
		  <ul class="collection">
			<li class="collection-item">
			  <span class="title">Request by: <a href="/#/user/{{hostrequest.user.id}}/reviews"><strong>{{hostrequest.user.first_name + " " + hostrequest.user.last_name}}</strong></a></span>
			  <p>Booking: <a href="/#/booking/{{hostrequest.booking.id}}/details"><strong>{{ hostrequest.booking.title}}</strong></a></p>
			  <p>Date and time: {{ hostrequest.date }} at {{hostrequest.time}}</p>
			  <p>Guests: {{ hostrequest.number_of_guests}}</p>
			  <a href="" class="secondary-content btn-flat mar-right-m mar-btm-m" ng-click="profile.declineRequest(hostrequest.id)"><i class="material-icons right">delete</i>Decline</a>
			  <a href="" class="secondary-content btn-flat mar-right-m mar-btm-m" ng-click="profile.acceptRequest(hostrequest.id, hostrequest.user.id, hostrequest.booking.id)"><i class="material-icons right">done</i>Accept</a>
			</li>
		  </ul>    
		</div>        
	  </div>
	</div>
  </div>
</div>
<div ng-if="profile.guestrequests.length" class="row">
  <div class="col s12 m12">
	<div class="card">
	  <div class="card-content black-text">
		<span class="card-title">My guestrequests</span>
		<div ng-repeat="guestrequest in profile.guestrequests">
		  <ul class="collection">
			<li class="collection-item">
			  <span ng-if="guestrequest.accepted == 0 && guestrequest.declined == 0" class="badge grey lighten-1 white-text" data-badge-caption="No response yet"></span>
			  <span ng-if="guestrequest.accepted == 1" class="badge green darken-1 white-text" data-badge-caption="Accepted"></span>
			  <span ng-if="guestrequest.declined == 1" class="badge red darken-1 white-text" data-badge-caption="Declined"></span>
			  <p>Booking: <a href="/#/booking/{{guestrequest.booking.id}}/details"><strong>{{ guestrequest.booking.title}}</strong></a></p>
			  <span class="title">Booking by: <a href="/#/user/{{guestrequest.host.host_id}}/reviews"><strong>{{guestrequest.host.first_name + " " + guestrequest.host.last_name}}</strong></a></span>
			  <p>Date and time: {{ guestrequest.date }} at {{guestrequest.time}}</p>
			  <p>Guests: {{ guestrequest.number_of_guests}}</p>
			  <a href="" class="secondary-content" ng-click="profile.deleteUserRequest(guestrequest.id)"><i class="material-icons">delete_forever</i></a>
			  <a ng-if="guestrequest.accepted == 1" href="" class="btn" ui-sref="booknow({id:guestrequest.booking.id})">Book now!</a>
			</li>
		  </ul>    
		</div>        
	  </div>
	</div>
  </div>
</div>
<div class="row">
  <div class="col s12 m12">
	<div class="card">
	  <div class="card-content black-text">
		<span class="card-title">My active bookings as a host</span>
		<p ng-if="profile.hostbookings.length < 1">No bookings yet as a host.</p>
		<div ng-repeat="booking in profile.hostbookings">
		  <ul class="collection">
			<li class="collection-item">
			  <span class="title"><a href="/#/booking/{{booking.id}}/details"><strong>{{booking.title}}</strong></a></span>
			  <p>{{ booking.postalcode + " " + booking.city}}</p>
			  <p>{{ booking.street_number}}</p>
			  <p>{{ booking.max_guests + " people | €" + booking.price + "/person"}}</p>
			  <a href="" class="secondary-content" ng-click="profile.deleteBooking(booking.id)"><i class="material-icons">delete_forever</i></a>
			</li>
		  </ul>    
		</div>        
	  </div>
	</div>
  </div>
</div>
<div class="row">
  <div class="col s12 m12">
	<div class="card">
	  <div class="card-content black-text">
		<span class="card-title">My active bookings as a guest</span>
		<p ng-if="profile.guestbookingdates.length < 1">No bookings yet as a guest.</p>
		<div ng-repeat="bookingdate in profile.guestbookingdates">
		  <ul class="collection">
			<li class="collection-item">
			  <span class="title"><a href="/#/booking/{{bookingdate.id}}/details"><strong>{{bookingdate.booking.title}}</strong></a></span>
			  <p>{{ bookingdate.host.first_name}} {{bookingdate.host.last_name}}</p>
			  <p>{{ bookingdate.booking.postalcode + " " + bookingdate.booking.city}}</p>
			  <p>{{ bookingdate.booking.street_number}}</p>
			  <p>{{ bookingdate.booking.max_guests + " people | €" + bookingdate.booking.price + "/person"}}</p>
			  <a href="" class="secondary-content" ng-click="profile.detachFromBooking(booking.id)"><i class="material-icons">delete_forever</i></a>
			</li>
		  </ul>    
		</div>        
	  </div>
	</div>
  </div>
</div>
<div class="row">
  <div class="col s12 m12">
	<div class="card">
	  <div class="card-content black-text">
		<span class="card-title">Reviews</span>
		  	<a href="/#/writereview"><h5>Write reviews for your guests or hosts here</h5></a>
		</div>        
	  </div>
	</div>
  </div>
</div>
</main>